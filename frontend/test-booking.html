<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Booking Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen py-8">
        <div class="max-w-4xl mx-auto px-4">
            <h1 class="text-3xl font-bold text-gray-900 mb-8">
                Test Booking Flow - MoMo Payment
            </h1>
            
            <div id="step1" class="bg-white rounded-lg shadow p-6">
                <h2 class="text-xl font-semibold mb-4">Step 1: Create Booking</h2>
                <p class="text-gray-600 mb-4">Tour: H√† Giang - V√≤ng Cung ƒê√° ƒê·ªìng VƒÉn</p>
                <p class="text-gray-600 mb-6">Price: 500,000 VND</p>
                
                <button
                    onclick="createBooking()"
                    class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                    Create Booking
                </button>
            </div>

            <div id="step2" class="bg-white rounded-lg shadow p-6 hidden">
                <h2 class="text-xl font-semibold mb-4">Step 2: Booking Created!</h2>
                <p class="text-gray-600 mb-2">Booking ID: <span id="bookingId"></span></p>
                <p class="text-gray-600 mb-2">User ID: 1</p>
                <p class="text-gray-600 mb-6">Total Amount: <span id="totalAmount"></span> VND</p>
                
                <div class="border-t pt-6">
                    <h3 class="text-lg font-semibold mb-4">Payment Options</h3>
                    <button
                        onclick="initiateMoMoPayment()"
                        class="w-full bg-pink-600 text-white py-3 px-4 rounded-md hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 text-lg font-semibold"
                    >
                        üí≥ Pay with MoMo
                    </button>
                </div>
            </div>

            <div id="step3" class="bg-white rounded-lg shadow p-6 hidden">
                <h2 class="text-xl font-semibold mb-4">Step 3: MoMo Payment</h2>
                <p class="text-gray-600 mb-6">Scan QR code to complete payment</p>
                
                <div class="text-center">
                    <div class="bg-gray-100 p-8 rounded-lg inline-block mb-4">
                        <img 
                            id="qrCode"
                            src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=momo_payment_test" 
                            alt="MoMo QR Code"
                            class="mx-auto"
                        />
                    </div>
                    <p class="text-sm text-gray-500 mb-4">
                        Amount: <span id="paymentAmount"></span> VND
                    </p>
                    <p class="text-sm text-gray-500">
                        Order ID: <span id="orderId"></span>
                    </p>
                </div>
                
                <div class="mt-6 text-center">
                    <button
                        onclick="resetFlow()"
                        class="bg-gray-500 text-white py-2 px-4 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500"
                    >
                        Back to Start
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let bookingData = null;

        function createBooking() {
            bookingData = {
                id: Math.floor(Math.random() * 1000),
                totalAmount: 500000,
                userId: 1
            };
            
            document.getElementById('bookingId').textContent = bookingData.id;
            document.getElementById('totalAmount').textContent = bookingData.totalAmount.toLocaleString();
            
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
            
            console.log('Mock booking created:', bookingData);
        }

        function initiateMoMoPayment() {
            const orderId = `MOMO_${Date.now()}`;
            const qrData = `momo_payment_${bookingData.id}_${bookingData.totalAmount}`;
            
            document.getElementById('paymentAmount').textContent = bookingData.totalAmount.toLocaleString();
            document.getElementById('orderId').textContent = orderId;
            document.getElementById('qrCode').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${qrData}`;
            
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.remove('hidden');
            
            console.log('MoMo payment initiated:', {
                orderId,
                qrData,
                bookingId: bookingData.id,
                amount: bookingData.totalAmount
            });
        }

        function resetFlow() {
            bookingData = null;
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step1').classList.remove('hidden');
        }
    </script>
</body>
</html>
