
Running 14 tests using 3 workers

[1A[2K[1/14] [chromium-no-cors] â€º tests\tours.spec.ts:25:3 â€º Admin Tours â€º create tour real API returns 201 (workaround token)
[1A[2K[2/14] [chromium-no-cors] â€º tests\login-real-api.spec.ts:24:3 â€º Admin Login Flow - Real API â€º should successfully login with real backend API
[1A[2K[3/14] [chromium-no-cors] â€º tests\login.spec.ts:13:3 â€º Admin Login Flow â€º should display login form correctly
[1A[2K  1) [chromium-no-cors] â€º tests\login.spec.ts:13:3 â€º Admin Login Flow â€º should display login form correctly 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: getByRole('textbox', { name: 'Email / Username' })
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for getByRole('textbox', { name: 'Email / Username' })[22m


      15 |
      16 |     // Check that all form elements are visible
    > 17 |     await expect(page.getByRole('textbox', { name: 'Email / Username' })).toBeVisible();
         |                                                                           ^
      18 |     await expect(page.getByRole('textbox', { name: 'Password' })).toBeVisible();
      19 |     await expect(page.getByRole('checkbox', { name: 'Ghi nhá»› Ä‘Äƒng nháº­p' })).toBeVisible();
      20 |     await expect(page.getByRole('button', { name: 'ÄÄƒng nháº­p' })).toBeVisible();
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login.spec.ts:17:75


[1A[2K[4/14] [chromium-no-cors] â€º tests\login.spec.ts:27:3 â€º Admin Login Flow â€º should validate empty form submission
[1A[2K  2) [chromium-no-cors] â€º tests\login-real-api.spec.ts:24:3 â€º Admin Login Flow - Real API â€º should successfully login with real backend API 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('textbox', { name: 'Email / Username' })[22m


      26 |
      27 |     // Fill login form
    > 28 |     await page.getByRole('textbox', { name: 'Email / Username' }).fill(testUser.username);
         |                                                                   ^
      29 |     await page.getByRole('textbox', { name: 'Password' }).fill(testUser.password);
      30 |
      31 |     // Submit form
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login-real-api.spec.ts:28:67


[1A[2K  3) [chromium-no-cors] â€º tests\tours.spec.ts:25:3 â€º Admin Tours â€º create tour real API returns 201 (workaround token) 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('textbox', { name: 'Tour name' })[22m


      25 |   test('create tour real API returns 201 (workaround token)', async ({ page }) => {
      26 |     await page.goto('/tours/new');
    > 27 |     await page.getByRole('textbox', { name: 'Tour name' }).fill('E2E Tour');
         |                                                            ^
      28 |     await page.getByRole('textbox', { name: 'Slug' }).fill('e2e-tour');
      29 |     await page.getByRole('spinbutton', { name: 'Base price' }).fill('1999');
      30 |     await page.getByRole('spinbutton', { name: 'Duration (days)' }).fill('5');
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\tours.spec.ts:27:60


[1A[2K[5/14] [chromium-no-cors] â€º tests\login-real-api.spec.ts:64:3 â€º Admin Login Flow - Real API â€º should handle invalid credentials correctly
[1A[2K[6/14] [chromium-no-cors] â€º tests\tours.spec.ts:40:3 â€º Admin Tours â€º edit tour shows success toast and navigates to list (stubbed)
[1A[2K  4) [chromium-no-cors] â€º tests\login.spec.ts:27:3 â€º Admin Login Flow â€º should validate empty form submission 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('button', { name: 'ÄÄƒng nháº­p' })[22m


      29 |
      30 |     // Try to submit empty form
    > 31 |     await page.getByRole('button', { name: 'ÄÄƒng nháº­p' }).click();
         |                                                           ^
      32 |
      33 |     // Should show validation error
      34 |     await expect(page.getByText('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ email vÃ  máº­t kháº©u')).toBeVisible();
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login.spec.ts:31:59


[1A[2K[7/14] [chromium-no-cors] â€º tests\login.spec.ts:37:3 â€º Admin Login Flow â€º should successfully login with valid credentials (mocked)
[1A[2K  5) [chromium-no-cors] â€º tests\login-real-api.spec.ts:64:3 â€º Admin Login Flow - Real API â€º should handle invalid credentials correctly 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('textbox', { name: 'Email / Username' })[22m


      66 |
      67 |     // Fill with wrong credentials
    > 68 |     await page.getByRole('textbox', { name: 'Email / Username' }).fill('wronguser');
         |                                                                   ^
      69 |     await page.getByRole('textbox', { name: 'Password' }).fill('wrongpass');
      70 |
      71 |     // Submit form
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login-real-api.spec.ts:68:67


[1A[2K  6) [chromium-no-cors] â€º tests\tours.spec.ts:40:3 â€º Admin Tours â€º edit tour shows success toast and navigates to list (stubbed) 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('spinbutton', { name: 'Base price' })[22m


      58 |     await page.goto('/tours/1');
      59 |     await expect(page.getByText('Äang táº£i dá»¯ liá»‡u tour...')).toBeHidden({ timeout: 5000 });
    > 60 |     await page.getByRole('spinbutton', { name: 'Base price' }).fill('2500');
         |                                                                ^
      61 |     await page.getByRole('button', { name: 'Update tour' }).click();
      62 |     await expect(page.getByRole('alert')).toContainText('Tour updated successfully');
      63 |   });
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\tours.spec.ts:60:64


[1A[2K[8/14] [chromium-no-cors] â€º tests\login-real-api.spec.ts:87:3 â€º Admin Login Flow - Real API â€º should persist session after page reload
[1A[2K  7) [chromium-no-cors] â€º tests\login.spec.ts:37:3 â€º Admin Login Flow â€º should successfully login with valid credentials (mocked) 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('textbox', { name: 'Email / Username' })[22m


      56 |
      57 |     // Fill in login form
    > 58 |     await page.getByRole('textbox', { name: 'Email / Username' }).fill('admin@gmail.com');
         |                                                                   ^
      59 |     await page.getByRole('textbox', { name: 'Password' }).fill('admin');
      60 |
      61 |     // Submit form
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login.spec.ts:58:67


[1A[2K[9/14] [chromium-no-cors] â€º tests\login.spec.ts:83:3 â€º Admin Login Flow â€º should handle login failure with error message (mocked)
[1A[2K  8) [chromium-no-cors] â€º tests\login-real-api.spec.ts:87:3 â€º Admin Login Flow - Real API â€º should persist session after page reload 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('textbox', { name: 'Email / Username' })[22m


      88 |     // First, login
      89 |     await page.goto('http://localhost:5174/auth/login');
    > 90 |     await page.getByRole('textbox', { name: 'Email / Username' }).fill(testUser.username);
         |                                                                   ^
      91 |     await page.getByRole('textbox', { name: 'Password' }).fill(testUser.password);
      92 |     await page.getByRole('button', { name: 'ÄÄƒng nháº­p' }).click();
      93 |     await page.waitForURL('http://localhost:5174/', { timeout: 10000 });
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login-real-api.spec.ts:90:67


[1A[2K[10/14] [chromium-no-cors] â€º tests\login-real-api.spec.ts:112:3 â€º Admin Login Flow - Real API â€º should auto-redirect to dashboard if already authenticated
[1A[2K  9) [chromium-no-cors] â€º tests\login-real-api.spec.ts:112:3 â€º Admin Login Flow - Real API â€º should auto-redirect to dashboard if already authenticated 

    TimeoutError: page.waitForURL: Timeout 5000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "http://localhost:5174/" until "load"
    ============================================================

      126 |
      127 |     // Should automatically redirect to dashboard
    > 128 |     await page.waitForURL('http://localhost:5174/', { timeout: 5000 });
          |                ^
      129 |     expect(page.url()).toBe('http://localhost:5174/');
      130 |
      131 |     console.log('âœ… Auto-redirect working correctly!');
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login-real-api.spec.ts:128:16


[1A[2K  10) [chromium-no-cors] â€º tests\login.spec.ts:83:3 â€º Admin Login Flow â€º should handle login failure with error message (mocked) 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('textbox', { name: 'Email / Username' })[22m


       96 |
       97 |     // Fill in login form with wrong credentials
    >  98 |     await page.getByRole('textbox', { name: 'Email / Username' }).fill('wrong@email.com');
          |                                                                   ^
       99 |     await page.getByRole('textbox', { name: 'Password' }).fill('wrongpass');
      100 |
      101 |     // Submit form
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login.spec.ts:98:67


[1A[2K[11/14] [chromium-no-cors] â€º tests\login-real-api.spec.ts:134:3 â€º Admin Login Flow - Real API â€º should set lastActivity timestamp on login
[1A[2K[12/14] [chromium-no-cors] â€º tests\login.spec.ts:115:3 â€º Admin Login Flow â€º should redirect to dashboard if already authenticated
[1A[2K  11) [chromium-no-cors] â€º tests\login.spec.ts:115:3 â€º Admin Login Flow â€º should redirect to dashboard if already authenticated 

    TimeoutError: page.waitForURL: Timeout 5000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "http://localhost:5174/" until "load"
    ============================================================

      129 |
      130 |     // Should automatically redirect to dashboard
    > 131 |     await page.waitForURL('http://localhost:5174/', { timeout: 5000 });
          |                ^
      132 |     expect(page.url()).toBe('http://localhost:5174/');
      133 |   });
      134 |
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login.spec.ts:131:16


[1A[2K[13/14] [chromium-no-cors] â€º tests\login.spec.ts:135:3 â€º Admin Login Flow â€º should clear all localStorage keys on 401 response
[1A[2K  12) [chromium-no-cors] â€º tests\login.spec.ts:135:3 â€º Admin Login Flow â€º should clear all localStorage keys on 401 response 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeNull[2m()[22m

    Received: [31m"expired-token"[39m

      173 |     const email = await page.evaluate(() => localStorage.getItem('bt-admin-email'));
      174 |
    > 175 |     expect(token).toBeNull();
          |                   ^
      176 |     expect(role).toBeNull();
      177 |     expect(username).toBeNull();
      178 |     expect(email).toBeNull();
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login.spec.ts:175:19


[1A[2K[14/14] [chromium-no-cors] â€º tests\login.spec.ts:181:3 â€º Admin Login Flow â€º should check "Remember Me" functionality
[1A[2K  13) [chromium-no-cors] â€º tests\login-real-api.spec.ts:134:3 â€º Admin Login Flow - Real API â€º should set lastActivity timestamp on login 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('textbox', { name: 'Email / Username' })[22m


      138 |     // Login
      139 |     await page.goto('http://localhost:5174/auth/login');
    > 140 |     await page.getByRole('textbox', { name: 'Email / Username' }).fill(testUser.username);
          |                                                                   ^
      141 |     await page.getByRole('textbox', { name: 'Password' }).fill(testUser.password);
      142 |     await page.getByRole('button', { name: 'ÄÄƒng nháº­p' }).click();
      143 |     await page.waitForURL('http://localhost:5174/', { timeout: 10000 });
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login-real-api.spec.ts:140:67


[1A[2K  14) [chromium-no-cors] â€º tests\login.spec.ts:181:3 â€º Admin Login Flow â€º should check "Remember Me" functionality 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.fill: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('textbox', { name: 'Email / Username' })[22m


      198 |
      199 |     // Fill form and check "Remember Me"
    > 200 |     await page.getByRole('textbox', { name: 'Email / Username' }).fill('admin@gmail.com');
          |                                                                   ^
      201 |     await page.getByRole('textbox', { name: 'Password' }).fill('admin');
      202 |     await page.getByRole('checkbox', { name: 'Ghi nhá»› Ä‘Äƒng nháº­p' }).check();
      203 |
        at C:\Users\Kiet\Desktop\BookingTour\frontend-admin\tests\login.spec.ts:200:67


[1A[2K  14 failed
    [chromium-no-cors] â€º tests\login-real-api.spec.ts:24:3 â€º Admin Login Flow - Real API â€º should successfully login with real backend API 
    [chromium-no-cors] â€º tests\login-real-api.spec.ts:64:3 â€º Admin Login Flow - Real API â€º should handle invalid credentials correctly 
    [chromium-no-cors] â€º tests\login-real-api.spec.ts:87:3 â€º Admin Login Flow - Real API â€º should persist session after page reload 
    [chromium-no-cors] â€º tests\login-real-api.spec.ts:112:3 â€º Admin Login Flow - Real API â€º should auto-redirect to dashboard if already authenticated 
    [chromium-no-cors] â€º tests\login-real-api.spec.ts:134:3 â€º Admin Login Flow - Real API â€º should set lastActivity timestamp on login 
    [chromium-no-cors] â€º tests\login.spec.ts:13:3 â€º Admin Login Flow â€º should display login form correctly 
    [chromium-no-cors] â€º tests\login.spec.ts:27:3 â€º Admin Login Flow â€º should validate empty form submission 
    [chromium-no-cors] â€º tests\login.spec.ts:37:3 â€º Admin Login Flow â€º should successfully login with valid credentials (mocked) 
    [chromium-no-cors] â€º tests\login.spec.ts:83:3 â€º Admin Login Flow â€º should handle login failure with error message (mocked) 
    [chromium-no-cors] â€º tests\login.spec.ts:115:3 â€º Admin Login Flow â€º should redirect to dashboard if already authenticated 
    [chromium-no-cors] â€º tests\login.spec.ts:135:3 â€º Admin Login Flow â€º should clear all localStorage keys on 401 response 
    [chromium-no-cors] â€º tests\login.spec.ts:181:3 â€º Admin Login Flow â€º should check "Remember Me" functionality 
    [chromium-no-cors] â€º tests\tours.spec.ts:25:3 â€º Admin Tours â€º create tour real API returns 201 (workaround token) 
    [chromium-no-cors] â€º tests\tours.spec.ts:40:3 â€º Admin Tours â€º edit tour shows success toast and navigates to list (stubbed) 
