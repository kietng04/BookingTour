â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  BookingTour - Database Setup Guide                         â•‘
â•‘                    3 CÃ¡ch Import Database Dá»… Nháº¥t                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CÃCH 1: DOCKER COMPOSE (RECOMMENDED) - CHá»ˆ Cáº¦N 1 Lá»†NH                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   ğŸ“ Äiá»u kiá»‡n: Docker & Docker Compose Ä‘Ã£ cÃ i Ä‘áº·t

   ğŸ¯ Lá»‡nh:
   
      docker-compose up -d postgres-db booking-db payment-db

   â±ï¸  Thá»i gian: ~15 giÃ¢y

   âœ… Tá»± Ä‘á»™ng lÃ m:
      âœ“ Táº¡o 3 PostgreSQL containers
      âœ“ Táº¡o 4 databases (userdb, tourdb, bookingdb, paymentdb)
      âœ“ Táº¡o táº¥t cáº£ tables (tá»« init scripts)
      âœ“ Insert dá»¯ liá»‡u máº«u (tá»« seed scripts)

   ğŸ” Kiá»ƒm tra:
   
      docker-compose ps                          # Xem status
      docker-compose logs postgres-db -n 20      # Xem logs


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CÃCH 2: SCRIPT Tá»° Äá»˜NG - CÃ“ MENU TÆ¯Æ NG TÃC                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   ğŸ“ Äiá»u kiá»‡n: PostgreSQL CLI (psql) Ä‘Ã£ cÃ i Ä‘áº·t

   ğŸ¯ Cháº¡y script:
   
      Windows:   .\import-db.bat
      Linux/Mac: chmod +x import-db.sh && ./import-db.sh

   ğŸ“‹ Menu lá»±a chá»n:
      1. Import táº¥t cáº£ (Init + Seed Data)
      2. Import chá»‰ schema (Init)
      3. Import chá»‰ dá»¯ liá»‡u (Seed Data)
      4. Reset + Import (Drop + Create + Init + Seed)
      5. Kiá»ƒm tra káº¿t ná»‘i
      6. ThoÃ¡t

   â±ï¸  Thá»i gian: ~5-10 giÃ¢y


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CÃCH 3: COMMAND LINE TRá»°C TIáº¾P - Náº¾U Báº N BIáº¾T PSQL                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   ğŸ“ Äiá»u kiá»‡n: PostgreSQL CLI (psql) Ä‘Ã£ cÃ i Ä‘áº·t

   ğŸ¯ Lá»‡nh (Windows):
   
      $env:PGPASSWORD="postgres"
      psql -U postgres -h localhost -p 5432 -f "sql-scripts\init-databases.sql"
      psql -U postgres -h localhost -p 5432 -f "sql-scripts\init-booking-db.sql"
      psql -U postgres -h localhost -p 5432 -f "sql-scripts\init-payment-db.sql"

   ğŸ¯ Lá»‡nh (Linux/Mac):
   
      export PGPASSWORD="postgres"
      psql -U postgres -h localhost -p 5432 -f "sql-scripts/init-databases.sql"
      psql -U postgres -h localhost -p 5432 -f "sql-scripts/init-booking-db.sql"
      psql -U postgres -h localhost -p 5432 -f "sql-scripts/init-payment-db.sql"

   â±ï¸  Thá»i gian: ~5 giÃ¢y


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           KIá»‚M TRA Káº¾T QUáº¢                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   Cháº¡y nhá»¯ng lá»‡nh nÃ y Ä‘á»ƒ xÃ¡c nháº­n:

   1ï¸âƒ£  Kiá»ƒm tra káº¿t ná»‘i:
       
       psql -U postgres -h localhost -p 5432 -c "\l"

   2ï¸âƒ£  Xem táº¥t cáº£ databases:
       
       psql -U postgres -h localhost -p 5432 -c "SELECT datname FROM pg_database WHERE datname IN ('userdb', 'tourdb', 'bookingdb', 'paymentdb');"

   3ï¸âƒ£  Xem táº¥t cáº£ tables:
       
       psql -U postgres -h localhost -p 5432 -d userdb -c "\dt"

   4ï¸âƒ£  Äáº¿m records:
       
       psql -U postgres -h localhost -p 5432 -d userdb -c "SELECT COUNT(*) FROM users;"
       psql -U postgres -h localhost -p 5432 -d userdb -c "SELECT COUNT(*) FROM tours;"


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      DATABASE ARCHITECTURE                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚          POSTGRES INSTANCE 1 (Port 5432)                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                          â”‚
   â”‚  ğŸ“¦ Database: userdb                                    â”‚
   â”‚     â”œâ”€ users ...................... User accounts        â”‚
   â”‚     â””â”€ user_verification ......... Email verification   â”‚
   â”‚                                                          â”‚
   â”‚  ğŸ“¦ Database: tourdb                                    â”‚
   â”‚     â”œâ”€ tours ...................... Tour packages       â”‚
   â”‚     â”œâ”€ departures ................ Tour schedules       â”‚
   â”‚     â”œâ”€ tour_schedules ........... Day-by-day itinerary â”‚
   â”‚     â”œâ”€ tour_images ............... Tour photos          â”‚
   â”‚     â”œâ”€ tour_discounts ........... Promotions           â”‚
   â”‚     â”œâ”€ tour_logs ................. Audit logs           â”‚
   â”‚     â”œâ”€ regions & provinces ...... Location data        â”‚
   â”‚     â””â”€ custom_tours ............. Custom requests      â”‚
   â”‚                                                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚          POSTGRES INSTANCE 2 (Port 5433)                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                          â”‚
   â”‚  ğŸ“¦ Database: bookingdb                                 â”‚
   â”‚     â”œâ”€ bookings .................. Booking records      â”‚
   â”‚     â”œâ”€ booking_guests ........... Guest information    â”‚
   â”‚     â””â”€ booking_logs ............. Audit logs           â”‚
   â”‚                                                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚          POSTGRES INSTANCE 3 (Port 5434)                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                          â”‚
   â”‚  ğŸ“¦ Database: paymentdb                                 â”‚
   â”‚     â”œâ”€ payments .................. Payment records      â”‚
   â”‚     â”œâ”€ payment_methods ......... Saved payment methods â”‚
   â”‚     â”œâ”€ payment_logs ............. Audit logs           â”‚
   â”‚     â””â”€ refunds ................... Refund records       â”‚
   â”‚                                                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    CONNECTION CREDENTIALS                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   Userdb & Tourdb:
   â€¢ Host: localhost
   â€¢ Port: 5432
   â€¢ Username: postgres
   â€¢ Password: postgres
   â€¢ Database: userdb hoáº·c tourdb

   Bookingdb:
   â€¢ Host: localhost
   â€¢ Port: 5433
   â€¢ Username: postgres
   â€¢ Password: postgres
   â€¢ Database: bookingdb

   Paymentdb:
   â€¢ Host: localhost
   â€¢ Port: 5434
   â€¢ Username: postgres
   â€¢ Password: postgres
   â€¢ Database: paymentdb


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    SQL SCRIPTS DESCRIPTION                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   ğŸ“„ init-databases.sql
      â””â”€ Táº¡o schema + tables cho userdb & tourdb
      â””â”€ Táº¡o ENUMs, indexes, foreign keys
      â””â”€ â±ï¸  Cháº¡y láº§n Ä‘áº§u

   ğŸ“„ init-booking-db.sql
      â””â”€ Táº¡o schema + tables cho bookingdb
      â””â”€ Táº¡o booking, booking_guests, booking_logs tables
      â””â”€ â±ï¸  Cháº¡y láº§n Ä‘áº§u

   ğŸ“„ init-payment-db.sql
      â””â”€ Táº¡o schema + tables cho paymentdb
      â””â”€ Táº¡o payments, payment_methods, payment_logs tables
      â””â”€ â±ï¸  Cháº¡y láº§n Ä‘áº§u

   ğŸ“„ script_data.sql
      â””â”€ Insert dá»¯ liá»‡u máº«u (users, tours, departures, etc.)
      â””â”€ â±ï¸  Optional - báº¡n cÃ³ thá»ƒ bá» qua náº¿u muá»‘n test trá»‘ng

   ğŸ“„ seed_01_userdb.sql, seed_02_tourdb.sql, seed_03_bookingdb.sql, seed_04_paymentdb.sql
      â””â”€ Seed dá»¯ liá»‡u riÃªng cho tá»«ng database
      â””â”€ â±ï¸  Alternative thay cho script_data.sql


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      TROUBLESHOOTING                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   âŒ "Connection refused"
      â†’ Kiá»ƒm tra PostgreSQL service Ä‘Ã£ start?
      â†’ Kiá»ƒm tra port 5432, 5433, 5434 khÃ´ng bá»‹ conflict?
      â†’ docker-compose ps

   âŒ "Database already exists"
      â†’ DROP DATABASE nÃ³ trÆ°á»›c
      â†’ Hoáº·c reset: docker-compose down && docker volume prune

   âŒ "psql: command not found"
      â†’ CÃ i PostgreSQL hoáº·c thÃªm vÃ o PATH
      â†’ Windows: https://www.postgresql.org/download/windows/
      â†’ Mac: brew install postgresql@15
      â†’ Linux: sudo apt-get install postgresql-client

   âŒ "Authentication failed"
      â†’ Kiá»ƒm tra username/password (máº·c Ä‘á»‹nh: postgres/postgres)
      â†’ Kiá»ƒm tra host/port cÃ³ Ä‘Ãºng?

   âŒ "Permission denied"
      â†’ Táº¡o .pgpass file
      â†’ Windows: %APPDATA%\postgresql\pgpass.conf
      â†’ Linux: ~/.pgpass (chmod 600)
      â†’ Format: localhost:5432:*:postgres:postgres


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    QUICK START CHECKLIST                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â˜ CÃ i Ä‘áº·t Docker & Docker Compose (hoáº·c PostgreSQL)
   â˜ Clone BookingTour repository
   â˜ Cháº¡y: docker-compose up -d postgres-db booking-db payment-db
   â˜ Chá» ~15 giÃ¢y
   â˜ Kiá»ƒm tra: docker-compose ps
   â˜ Test káº¿t ná»‘i: psql -U postgres -h localhost -p 5432 -c "\l"
   â˜ âœ… Done! Databases ready to use

   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Xem DATABASE_IMPORT_GUIDE.md Ä‘á»ƒ biáº¿t chi tiáº¿t hÆ¡n!
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

